#!/bin/bash
stty -echo
init() {
clear
sleep 0.5
toilet Re
sleep 0.2
toilet Starter
sleep 0.6
toilet by
sleep 0.6
toilet Minyon
sleep 2
clear
echo "Initializing..."
termux-toast Punks Not Dead
cat <<- xx

__________________________________________________
______¶___________________________________________
____1¶¶1__________________________________________
_____¶¶¶1_________________________________________
______1¶¶¶¶¶¶11_______________1111________________
__________1¶¶¶¶¶¶¶¶1_________¶¶¶¶¶¶_______________
______________11¶¶¶¶¶¶¶1¶1__¶¶¶¶¶¶¶1______________
_________________1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶_______________
__________________11¶¶¶¶¶¶¶¶¶¶¶¶¶¶________________
______________________¶¶¶¶¶¶¶¶¶¶¶¶¶_______________
______________________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶_____________
_____________________1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶___________
_____________________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1_______
_________________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶__1¶¶1¶¶¶¶¶¶1____
________________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1__111¶¶1___
_______________1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶___________
_______________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶___________
______________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1¶¶¶¶1___________
_____________¶¶¶¶¶_1¶¶¶¶¶¶¶¶¶¶¶¶__¶¶¶¶____________
____________¶¶¶¶¶_____1111¶¶11___¶¶¶¶1____________
__________¶¶¶¶¶¶1______________1¶¶¶¶¶1____________
________1¶¶¶¶¶¶1______________¶¶¶¶¶¶¶1____________
____¶¶1¶¶¶¶¶¶¶1_111111111_____1¶¶¶¶¶¶_____________
____1¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1____________
______11¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶1_____________
__________1¶1_______________1¶1___________________
___________¶1________________¶1___________________
__________________________________________________
__________________________________________________

xx
restart
}
restart() {
termux-wifi-enable false
termux-wifi-enable true
termux-wifi-scaninfo
clear
sleep 3
return
}
main() {
target_ip="www.google.com"

printed=false
stat="Connection status:"



while true
do
    result=$(ping -c 1 $target_ip 2>&1)

    if [ $? -eq 0 ]; then
        if [ "$result" != "$last_success" ] && [ "$printed" = false ]; then
	    clear
	    echo $stat
            toilet ONLINE
            termux-toast Connected
            last_success="$result"
	    printed=true
        fi
    else
	    clear
	    echo $stat
	    toilet OFFLINE
	    termux-toast  Reconnecting...
            last_success=""
	    printed=false
            restart
    fi

    sleep 1
done 
}

init
echo "Done"
sleep 1
clear
main
